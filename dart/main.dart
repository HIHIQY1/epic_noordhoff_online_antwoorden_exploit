import 'dart:convert';
import "dart:io";
import 'package:pdf/pdf.dart';
import 'package:pdf/widgets.dart' as pw;

// doe gwn "dart main.dart ./saus.json" ofzpo je weet vast wel hoe je de json kan verkrijgen lol
void main(List<String> args) {
  print("start");
  if (File(args[0]).existsSync()) {
    var dater = json.decode(File(args[0]).readAsStringSync());
    final pdf = pw.Document();
    pdf.addPage(pw.MultiPage(
      build: (pw.Context context) {
        //return pw.ListView(
        //  children: answerList(dater),
        //  padding: pw.EdgeInsets.all(0),
        //  spacing: 0,
        //);
        List<pw.Widget> allWidgets = [];
        allWidgets.addAll(headingElements(dater["info"]));
        allWidgets.addAll(answerList(dater["opdrachten"]));
        return allWidgets;
      },
    ));
    print("built page. saving...");

    File("./lol.pdf").writeAsBytesSync(pdf.save());
    print("saved");
  } else {
    print("file does not exist lmao");
  }
}

List<pw.Widget> headingElements(dynamic headerData) {
  List<pw.Widget> lijst = [];
}

List<pw.Widget> answerList(dynamic answerData) {
  List<pw.Widget> lijst = [];

  for (int i = 0; i < 50; i++) {
    lijst.add(
      pw.Container(
        margin: pw.EdgeInsets.only(top: 5.0, bottom: 5.0),
        //child: pw.DecoratedBox(
        child: pw.ListView(
          children: [
            pw.Padding(
              padding: pw.EdgeInsets.all(5.0),
              child: pw.Text("text " + i.toString()),
            ),
          ],
        ),
        //),
        decoration: pw.BoxDecoration(
          border: pw.BoxBorder(
            left: true,
            color: PdfColor.fromInt(0x00de00),
          ),
        ),
      ),
    );
  }

  return lijst;
}
